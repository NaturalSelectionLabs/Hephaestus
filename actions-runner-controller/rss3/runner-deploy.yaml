apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: rss3-runner
  namespace: guardian
spec:
  replicas: 1
  template:
    spec:
      githubAPICredentialsFrom:
        secretRef:
          name: action-runner-controller-rss3
      dockerdWithinRunnerContainer: true
      group: Default
      serviceAccountName: argocd-application-controller
      automountServiceAccountToken: true
      env:
        - name: KUBERNETES_SERVICE_PORT_HTTPS
          value: '443'
        - name: KUBERNETES_SERVICE_PORT
          value: '443'
        - name: KUBERNETES_SERVICE_HOST
          value: 10.1.24.1
      labels:
        - rss3
        - rss3-network
        - rss3-io
      image: summerwind/actions-runner-dind
      organization: RSS3-Network
      resources:
        requests:
          cpu: '4'
          memory: 8Gi
